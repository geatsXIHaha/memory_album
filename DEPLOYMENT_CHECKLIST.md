# 部署前清单

在部署情侣日记应用到生产环境前，请检查以下项目：

## ✅ 开发环境

- [ ] Node.js 18+ 已安装
- [ ] npm 或 yarn 已安装
- [ ] 项目依赖已安装 (`npm install` 已运行)
- [ ] 没有 TypeScript 错误 (`npm run build` 成功)
- [ ] 没有 ESLint 警告 (`npm run lint` 通过)

## ✅ Firebase 配置

### 项目设置
- [ ] Firebase 项目已创建
- [ ] 项目 ID 已获取
- [ ] `.env.local` 文件已创建
- [ ] 所有环境变量已正确填入

### 启用的服务
- [ ] Firebase Authentication (Email/Password + Anonymous)
- [ ] Firebase Realtime Database
- [ ] Firebase Cloud Storage

### 安全规则
- [ ] Realtime Database 规则已配置
- [ ] Cloud Storage 规则已配置
- [ ] 规则已测试和验证

## ✅ 本地测试

### 功能测试
- [ ] 用户认证
  - [ ] 邮箱注册成功
  - [ ] 邮箱登录成功
  - [ ] 匿名登录成功
  - [ ] 登出功能正常
  - [ ] 退出后重定向到登录页

- [ ] 日记管理
  - [ ] 创建新日记成功
  - [ ] 日期选择正常
  - [ ] 心情表情选择正常
  - [ ] 地点输入正常
  - [ ] 内容输入正常
  - [ ] 日记保存成功
  - [ ] 日记出现在列表中
  - [ ] 查看日记详情正常
  - [ ] 编辑日记成功
  - [ ] 删除日记成功

- [ ] 图片上传
  - [ ] 单张图片上传成功
  - [ ] 多张图片上传成功
  - [ ] 图片预览显示正确
  - [ ] 图片删除功能正常
  - [ ] 大图片被压缩处理
  - [ ] 图片在浏览器中加载正常

- [ ] 主题定制
  - [ ] 6个预设主题都可选择
  - [ ] 主色更改生效
  - [ ] 副色更改生效
  - [ ] 背景色更改生效
  - [ ] 文字色更改生效
  - [ ] 深色模式切换生效
  - [ ] 主题保存成功
  - [ ] 刷新后主题保留

- [ ] 统计功能
  - [ ] 总日记数计算正确
  - [ ] 本月日记数计算正确
  - [ ] 连续打卡天数计算正确

### 响应式测试
- [ ] 桌面版本 (1920x1080) 显示正常
- [ ] 平板版本 (768x1024) 显示正常
- [ ] 手机版本 (375x667) 显示正常
- [ ] 按钮大小适合触摸
- [ ] 文本可读性好
- [ ] 图片显示得当

### 浏览器兼容性
- [ ] Chrome 最新版本
- [ ] Firefox 最新版本
- [ ] Safari 最新版本（如果有Mac）
- [ ] Edge 最新版本

### 性能测试
- [ ] 初次加载时间 < 3秒
- [ ] 日记列表加载顺畅
- [ ] 图片上传速度可接受
- [ ] 没有控制台错误
- [ ] 没有控制台警告

## ✅ 构建验证

```bash
# 清除构建缓存（可选）
rm -rf dist

# 执行生产构建
npm run build

# 验证构建成功
- [ ] dist 文件夹已生成
- [ ] index.html 存在
- [ ] CSS 文件已生成
- [ ] JavaScript 文件已生成
- [ ] 没有构建错误

# 本地预览构建
npm run preview

# 测试预览
- [ ] 应用可访问
- [ ] 所有功能正常
- [ ] 样式加载正确
```

## ✅ 安全检查

- [ ] .env.local 文件已添加到 .gitignore
- [ ] Firebase API Key 仅在 .env.local 中，不在代码中
- [ ] 没有硬编码的敏感信息
- [ ] Firebase 规则只允许认证用户
- [ ] 用户数据隔离正确
- [ ] 图片存储路径正确隔离

## ✅ 代码质量

- [ ] 没有 console.log 调试代码（除了错误日志）
- [ ] 注释清晰有意义
- [ ] 变量命名遵循规范
- [ ] 没有冗余代码
- [ ] 错误处理完整

## ✅ 文档准备

- [ ] README.md 已更新
- [ ] QUICKSTART.md 已完成
- [ ] FIREBASE_SETUP.md 已完成
- [ ] PROJECT_SUMMARY.md 已完成
- [ ] .env.example 已创建并示例正确

## ✅ 部署选择

选择一个部署平台：

### 选项 1: Firebase Hosting（推荐）
- [ ] Firebase CLI 已安装 (`npm install -g firebase-tools`)
- [ ] 已登录 Firebase (`firebase login`)
- [ ] firebase.json 已配置（如果需要）

### 选项 2: Vercel
- [ ] Vercel CLI 已安装
- [ ] Vercel 账户已创建
- [ ] 项目与 GitHub repo 连接（可选）

### 选项 3: Netlify
- [ ] Netlify CLI 已安装
- [ ] Netlify 账户已创建
- [ ] 构建命令已配置：`npm run build`
- [ ] 发布目录已配置：`dist`

## ✅ 部署步骤

### Firebase Hosting
```bash
firebase deploy
- [ ] 部署完成
- [ ] 获得部署 URL
- [ ] 应用可从 URL 访问
```

### Vercel
```bash
vercel --prod
- [ ] 部署完成
- [ ] 获得生产 URL
- [ ] 应用可从 URL 访问
```

### Netlify
```bash
netlify deploy --prod --dir=dist
- [ ] 部署完成
- [ ] 获得部署 URL
- [ ] 应用可从 URL 访问
```

## ✅ 部署后验证

### 基础功能
- [ ] 应用首页加载正常
- [ ] 可以看到登录界面
- [ ] 能够注册新账户
- [ ] 能够登录账户
- [ ] 能够创建日记
- [ ] 能够上传图片
- [ ] 能够查看历史日记
- [ ] 能够编辑日记
- [ ] 能够删除日记
- [ ] 能够更改主题
- [ ] 能够登出

### 性能
- [ ] 首屏加载时间 < 3秒
- [ ] 应用响应快速
- [ ] 没有崩溃或错误
- [ ] 图片加载正常

### 跨设备
- [ ] 桌面版本工作正常
- [ ] 平板版本工作正常
- [ ] 手机版本工作正常
- [ ] 触摸操作响应正常

### 数据
- [ ] 数据正确保存到 Firebase
- [ ] 数据可在多个设备间同步
- [ ] 图片可正确显示
- [ ] 删除的数据已清除

## ✅ 监控和维护

部署后：

- [ ] 设置 Firebase 使用监控
- [ ] 设置存储配额警告
- [ ] 定期检查错误日志
- [ ] 备份重要数据
- [ ] 计划后续功能更新

## ✅ 用户通知

- [ ] 邀请伴侣访问应用
- [ ] 分享部署 URL
- [ ] 提供使用说明
- [ ] 收集反馈
- [ ] 记录改进建议

## 🎉 部署完成！

所有项目都检查完成后，你的情侣日记应用已准备好投入使用！

## 🔄 如果出现问题

1. **检查浏览器控制台**（F12 → Console 标签）
2. **检查 Firebase 控制台**查看数据库状态
3. **检查部署日志**查看构建错误
4. **检查网络标签**查看 API 调用是否成功
5. **查看完整错误信息**而不是只看错误代码

## 📞 获取帮助

- 查看 README.md 完整文档
- 查看 QUICKSTART.md 快速指南
- 查看 FIREBASE_SETUP.md Firebase 配置指南
- 查看 PROJECT_SUMMARY.md 项目总结
- 检查代码注释和文档字符串

---

**祝部署顺利！** 🚀💑✨
